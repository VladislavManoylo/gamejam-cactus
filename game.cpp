#include <iostream>
#include <chrono>
#include <thread>
#include <ncurses.h>
using namespace std;
using namespace std::chrono;

#define DEBUG

const unsigned FPS = 30;
const unsigned MPF = 1000/FPS;

enum class Command {
	exit,
	none
};

Command getCommand() {
	char input = getch();
	switch (input) {
		case 27: return Command::exit; // 27 is the escape key
		default: return Command::none;
	}
}

class Game {
public:
	char* getScreen() {
		return m_screen;
	}
private:
	char* m_screen =
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n"
		"................................................................................\n";
};

int main() {
	initscr();
	nodelay(stdscr, TRUE);
	Command cmd = Command::none;
	time_point<system_clock> time = system_clock::now();
	Game game;
	do {
		cmd = getCommand();
		erase();
		printw(game.getScreen());
		refresh();
		time += milliseconds(MPF);
		this_thread::sleep_until(time);
		if (cmd == Command::exit)
			break;
	} while (true);
	endwin();

	return 0;
}
